# 语言基础
## 语言概述


### 语言特性
- **动态类型**
	- 变量可以在不同类型之间自由切换，且隐式类型转换很常见。
	- 示例：`let x = 10; x = "hello";`（合法）。
- **弱类型**
	- 变量的类型在运行时确定，而不是编译时。
- **解释型语言**
	- JavaScript 是一门解释型语言（现代浏览器也会做 JIT 编译优化）。
	- 没有传统意义上的“编译”步骤，运行时直接执行。
- **单线程、非阻塞、事件驱动**
	- JavaScript 是单线程语言。
	- 依靠事件循环（Event Loop）+ 回调（Callback）+ 异步（Promise、async/await）来解决“单线程”带来的阻塞问题。
- **面向对象与函数式**
	- 支持基于原型的面向对象编程（`prototype`）。
	- 支持函数式编程（高阶函数、闭包、函数一等公民）。
- **跨平台**
	- 浏览器、服务器、移动端、嵌入式设备均可运行。



### 基本语法
- **区分大小写**
	- JavaScript 是大小写敏感的语言。
	- 示例：`myVar` 和 `myvar` 是不同的变量名。
- **标识符命名规则**
	- 必须以字母（a-z、A-Z）、下划线 `_` 或美元符号 `$` 开头。
	- 后续字符可以是字母、数字（0-9）、下划线或美元符号。
	- 不能使用关键字（如 `if`、`for`）或保留字。
	- 推荐使用驼峰命名法（`myVariableName`）。
- **注释**
	- 单行注释：`// 注释内容`。
	- 多行注释：`/* 注释内容 */`。
- **严格模式**
	- 在脚本或函数开头添加 `"use strict";`，启用严格模式。
	- 作用：
		- 消除不安全的语法（如未声明变量的使用）。
		- 抛出更多错误，便于调试。
		- 禁止某些不推荐的特性（如 `with` 语句）。
	- 影响：
		- 全局变量必须显式声明（否则抛出 `ReferenceError`）。
		- 函数参数名不能重复。
		- `this` 在非方法函数中为 `undefined`（而非指向全局对象）。


## 变量与类型
### 数据类型
### 数据类型概述
- **基本数据类型**（Primitive Types）：存储在栈中，值直接存储，复制时传递值。
- **引用数据类型**（Reference Types）：存储在堆中，变量保存引用（内存地址），复制时传递引用。
### 基本数据类型
- **nudefined**：表示变量已声明但未赋值，或函数无显式返回值。
	- 特性：通常由 JavaScript 引擎自动分配，表示某种“默认的缺失状态”。
	- 注意：
		- 避免主动赋值为 `undefined`，用于表示“无值”时优先用 `null`。
		- 防止和 JavaScript 引擎分配的 `undefined` 冲突，导致语义不明确。
- **null**：表示空值或对象引用不存在。
	- 特性：常用于初始化对象或清除引用。通常由开发者主动设置，表示变量或对象引用故意为空。
	- 注意：`typeof null` 返回 `"object"`（历史遗留 bug）。
- **boolean**：表示真或假。
	- 特性：只有 `true` 和 `false` 两个值。
	- 应用：条件判断、逻辑运算。
- **number**：表示数字，包括整数、浮点数、特殊值。
	- 特性：
		- 基于 IEEE 754 双精度浮点数。
		- 特殊值：`NaN`（非数字）、`Infinity`（正无穷）、`-Infinity`（负无穷）。
	- 注意：
		- `NaN` 不等于自身（`NaN !== NaN`），使用 `isNaN()` 或 `Number.isNaN()` 检测。
		- 浮点数精度问题：`0.1 + 0.2 !== 0.3`，使用 `toFixed()` 处理。
- **bigint**：表示任意精度的整数。
	- 特性：ES2020 引入，用于处理超过 `Number.MAX_SAFE_INTEGER（2^53 - 1）`的整数。
	- 注意：不能与 `number` 类型直接运算，需显式转换。
- **string**：表示文本数据。
	- 特性：不可变，字符串操作会返回新字符串。
	- 常用方法：`length`、`slice()`、`substring()`、`indexOf()`、`replace()`、`split()` 等。
- **symbol**：表示唯一标识符。
	- 特性：ES6 引入，每个 `Symbol` 值唯一，常用于对象属性键。
	- 应用：防止对象属性名冲突。
### 引用数据类型
- **Object**：复杂数据结构，包括普通对象、数组、函数、正则表达式等。
	- 特性：通过引用操作，修改会影响所有引用。
	- 子类型：
		- Array：有序列表。
		- Function：可调用对象。
		- Date、RegExp、Map、Set 等。
### 变量

### 变量声明
- **var**
	- 特性：
		- 函数作用域（Function Scope）。
		- 变量提升（Hoisting）：声明会被提升到函数顶部，但初始化不会。
		- 可重复声明。
	- 问题：
		- 变量提升可能导致逻辑混乱。
		- 缺乏块级作用域，易引发 bug。
- **let**
	- 特性：
		- 块级作用域（Block Scope）。
		- 无变量提升，存在“暂态死区”（TDZ，Temporal Dead Zone）。
		- 不可重复声明。
	- 注意：访问未初始化变量会抛出 `ReferenceError`。
- **const**
	- 特性：
		- 块级作用域。
		- 必须初始化，且初始化后不可重新赋值。
		- 对于引用类型，对象内容可修改。
	- 注意：`const` 保证引用不变，不保证对象内部数据不变。
### 类型检查
- **typeof 操作符**
	- 作用：返回变量的类型（字符串形式）。
	- 返回值：
		- `null` 返回 `"object"`。
		- 函数返回 `"function"`。
		- 其它类型返回类型对应的字符串。
	- 局限：无法区分对象子类型（如数组、普通对象）。
- **instanceof 操作符**
	- 作用：检测对象是否是某个构造函数的实例（检查原型链）。
	- 示例：
		```js
		let arr = [1, 2, 3];
		console.log(arr instanceof Array); // true
		console.log(arr instanceof Object); // true（Array 继承自 Object）
		```
	- 局限：跨 iframe 或不同上下文可能失效。
- **Object.prototype.toString.call()**
	- 作用：精确获取对象类型。
	- 示例：
		```js
		console.log(Object.prototype.toString.call([])); // "[object Array]"
		console.log(Object.prototype.toString.call(null)); // "[object Null]"
		console.log(Object.prototype.toString.call(new Date())); // "[object Date]"
		```
	- 优点：可靠区分所有内置对象类型。
	- 注意：推荐使用 `Array.isArray()` 检测数组。
### 类型转换
---
#### 隐式转换
---
- 场景：在运算（如 `==`、加法）或条件判断中自动发生。
- 规则：
	- ToPrimitive：将对象转换为基本类型（调用 `valueOf()` 或 `toString()`）。
	- 字符串连接：`+` 运算符若有字符串，转换为字符串。
	- 比较运算：`==` 会尝试将两边转换为相同类型。
	- 逻辑运算：转换为布尔值（`!!` 效果）。
- 示例：
	```js
	console.log("5" + 3); // "53"（字符串连接）
	console.log("5" - 3); // 2（转换为数字）
	console.log("5" == 5); // true（松散相等）
	console.log([] == 0); // true（[] 转为 ""，再转为 0）
	console.log(!!"hello"); // true（转为布尔）
	```
- 注意：`==` 的复杂转换规则易导致 bug，推荐使用 `===`。
#### 显示转换
---
- **转换为数字**
	- `Number()`：将值转为数字。
	- `parseInt()`、`parseFloat()`：解析字符串为整数或浮点数。
	- 示例：
		```js
		console.log(Number("123")); // 123
		console.log(parseInt("123.45")); // 123
		console.log(parseFloat("123.45")); // 123.45
		```
- **转换为字符串**
	- String()、toString()。
	- 示例：
		```js
		console.log(String(123)); // "123"
		console.log((123).toString()); // "123"
		```
- **转换为布尔值**
	- `Boolean()`。
	- 假值（Falsy）：`false`、`0`、`-0`、`""`、`null`、`undefined`、`NaN`。显式或者隐式转为 `false`。
	- 示例：
		```js
		console.log(Boolean(0)); // false
		console.log(Boolean("")); // false
		console.log(Boolean({})); // true
		```
#### 包装对象
---
- 定义：基本类型（`string`、`number`、`boolean`）在需要时会自动包装为对象（`String`、`Number`、`Boolean`）。
- 示例：
	```js
	let str = "hello";
	console.log(str.toUpperCase()); // "HELLO"（自动包装为 String 对象）
	```
- 注意：
	- 包装对象是临时的，操作后销毁。
	- 不要手动创建包装对象（如 `new String()`），性能差且易混淆。



## 运算符
### 运算符类型
- **算数运算符**：用于执行数学运算
	- `+`：加法
	- `-`：减法
	- `*`：乘法
	- `/`：除法
	- `%`：取余
	- `**`：求幂，`a ** b` 表示 a 的 b 次幂  $a^b$
	- `++`：自增，`++a` 表示先自增再返回
	- `--`：自减，`a--` 表示先返回再自减
- **比较运算符**：用于比较两个值。
	- `==`：等于（忽略类型）
	- `===`：严格等于（考虑类型）
	- `!=`：不等于（忽略类型）
	- `!==`：严格不等于（考虑类型）
	- `>`：大于
	- `<`：小于
	- `>=`：大于等于
	- `<=`：小于等于
- **位运算符**：直接对整数的二进制位进行操作。
	- `&`：按位与
	- `|`：按位或
	- `^`：按位异或
	- `~`：按位非
	- `<<`：左移
	- `>>`：右移
	- `>>>`：无符号位右移
- **逻辑运算符**：用于处理布尔值。
	- `&&`：逻辑与，可以短路运算
	- `||`：逻辑或，可以短路运算
	- `!`：逻辑非
- **赋值运算符**：用于给变量赋值。
	- `=`：简单赋值
	- `+=`：加法赋值
	- `-=`：减法赋值
	- `*=`：乘法赋值
	- `/=`：除法赋值
	- `%=`：取余赋值
	- `**=`：求幂赋值
- **三元运算符**：是一个简化的条件判断语句。
	- `? :`
- **字符串运算符**：用于拼接字符串。
	- `+`：字符串拼接运算符
	- `+=`：拼接字符串并赋值
- **空值合并运算符**
	- `??`：空值合并运算符，在左操作数为`null`或`undefined`时返回右操作数，用于提供默认值。
- **可选链运算符**：用于访问对象属性或方法时，若中间值为 `null` 或 `undefined`，返回 `undefined`，而不是抛出错误。
	- `?.`：可选链运算符
	- `obj?.prop`：访问对象属性
	- `arr?.[index]`：访问数组元素
	- `func?.(...args)`：调用方法
- **展开运算符**：将数组、对象或可迭代对象的元素展开。
	- `...`：展开运算符，后出现的属性会覆盖前面的同名属性。
	- `[...iterable]`：数组展开
	- `{...obj}`：对象展开
	- `fn(...args)`：函数参数展开
- **其它运算符**：
	- `,`：逗号运算符，计算多个表达式，返回最后一个。
	- `delete`：用于删除对象的属性。
	- `in`：检查对象是否包含某个属性。
	- `void`：对给定的表达式求值，然后返回 `undefined`。
### 运算符优先级

| 优先级 | 运算符                                                  | 描述           | 结合性  | 示例                            |
| --- | ---------------------------------------------------- | ------------ | ---- | ----------------------------- |
| 21  | ()                                                   | 括号（分组）       | 无    | (2 + 3) * 4 // 20             |
| 20  | .                                                    | 成员访问         | 从左到右 | obj.prop                      |
| 20  | []                                                   | 计算属性访问       | 从左到右 | obj[expr]                     |
| 20  | ?.                                                   | 可选链          | 从左到右 | obj?.prop                     |
| 19  | new                                                  | new（带参数）     | 无    | new Date()                    |
| 18  | ()                                                   | 函数调用         | 从左到右 | func(1, 2)                    |
| 18  | new                                                  | new（无参数）     | 无    | new Date                      |
| 17  | ++                                                   | 后置自增         | 无    | x++                           |
| 17  | --                                                   | 后置自减         | 无    | x--                           |
| 16  | ++                                                   | 前置自增         | 从右到左 | ++x                           |
| 16  | --                                                   | 前置自减         | 从右到左 | --x                           |
| 16  | +                                                    | 一元加          | 从右到左 | +x                            |
| 16  | -                                                    | 一元负          | 从右到左 | -x                            |
| 16  | !                                                    | 逻辑非          | 从右到左 | !true // false                |
| 16  | ~                                                    | 按位非          | 从右到左 | ~5 // -6                      |
| 16  | typeof                                               | 类型检查         | 从右到左 | typeof x // 'number'          |
| 16  | void                                                 | 返回 undefined | 从右到左 | void 0 // undefined           |
| 16  | delete                                               | 删除属性         | 从右到左 | delete obj.prop               |
| 15  | **                                                   | 幂运算          | 从右到左 | 2 ** 3 // 8                   |
| 14  | *                                                    | 乘法           | 从左到右 | 3 * 4 // 12                   |
| 14  | /                                                    | 除法           | 从左到右 | 6 / 2 // 3                    |
| 14  | %                                                    | 取模           | 从左到右 | 5 % 2 // 1                    |
| 13  | +                                                    | 加法/字符串拼接     | 从左到右 | 2 + 3 // 5, 'a' + 'b' // 'ab' |
| 13  | -                                                    | 减法           | 从左到右 | 5 - 3 // 2                    |
| 12  | <<                                                   | 左移           | 从左到右 | 8 << 2 // 32                  |
| 12  | >>                                                   | 右移           | 从左到右 | 8 >> 1 // 4                   |
| 12  | >>>                                                  | 无符号右移        | 从左到右 | 8 >>> 1 // 4                  |
| 11  | <                                                    | 小于           | 从左到右 | 3 < 5 // true                 |
| 11  | <=                                                   | 小于等于         | 从左到右 | 3 <= 3 // true                |
| 11  | >                                                    | 大于           | 从左到右 | 5 > 3 // true                 |
| 11  | >=                                                   | 大于等于         | 从左到右 | 5 >= 3 // true                |
| 11  | in                                                   | 属性检查         | 从左到右 | 'prop' in obj // true         |
| 11  | instanceof                                           | 类型检查         | 从左到右 | [] instanceof Array // true   |
| 10  | ==                                                   | 相等           | 从左到右 | 5 == '5' // true              |
| 10  | !=                                                   | 不相等          | 从左到右 | 5 != '5' // false             |
| 10  | ===                                                  | 严格相等         | 从左到右 | 5 === 5 // true               |
| 10  | !==                                                  | 严格不相等        | 从左到右 | 5 !== '5' // true             |
| 9   | &                                                    | 按位与          | 从左到右 | 5 & 3 // 1                    |
| 8   | ^                                                    | 按位异或         | 从左到右 | 5 ^ 3 // 6                    |
| 7   | \|                                                   | 按位或          | 从左到右 | 5 \| 2 // 7                   |
| 6   | &&                                                   | 逻辑与          | 从左到右 | true && false // false        |
| 5   | \|\|                                                 | 逻辑或          | 从左到右 | true \|\| false // true       |
| 5   | ??                                                   | 空值合并         | 从左到右 | null ?? 10 // 10              |
| 4   | ?:                                                   | 条件（三元）运算     | 从右到左 | x > 5 ? 'big' : 'small'       |
| 3   | =                                                    | 赋值           | 从右到左 | x = 5                         |
| 3   | +=, -=, *=, /=, %=, **=, <<=, >>=, >>>=, &=, ^=, \|= | =            | 复合赋值 | 从右到左                          |
| 2   | ...                                                  | 展开运算         | 无    | [...[1, 2], 3] // [1, 2, 3]   |
| 1   | ,                                                    | 逗号           | 从左到右 | let a = (1, 2, 3) // a = 3    |




## 控制流
### 条件语句
- **if...else**
	- 作用：根据条件执行不同的代码块。
	- 语法：
		```js
		if (condition) {
		  // 条件为真时执行
		} else if (anotherCondition) {
		  // 另一条件为真时执行
		} else {
		  // 所有条件为假时执行
		}
		```
	- 示例：
		```js
		let score = 85;
		if (score >= 90) {
		  console.log("A");
		} else if (score >= 80) {
		  console.log("B"); // 输出: B
		} else {
		  console.log("C");
		}
		```
	- 注意：
		- 条件表达式会转换为布尔值（使用 `Boolean()` 规则）。
		- 假值（Falsy）：`false`、`0`、`""`、`null`、`undefined`、`NaN`。
		- 避免嵌套过深的 `if...else`，可考虑使用 `switch` 或重构逻辑。
		- 块级作用域（`let`、`const`）变量只在 `{}` 内有效。
- **switch...case**
	- 作用：根据表达式的值匹配多个分支，执行对应代码块。
	- 语法：
		```js
		switch (expression) {
		  case value1:
		    // 匹配 value1 时执行
		    break;
		  case value2:
		    // 匹配 value2 时执行
		    break;
		  default:
		    // 无匹配时执行
		}
		```
	- 示例：
		```js
		let day = 3;
		switch (day) {
		  case 1:
		    console.log("Monday");
		    break;
		  case 2:
		    console.log("Tuesday");
		    break;
		  case 3:
		    console.log("Wednesday"); // 输出: Wednesday
		    break;
		  default:
		    console.log("Unknown day");
		}
		```
	- 注意：
		- 使用 `break` 防止“穿透”（fall-through），否则会继续执行后续 `case`。
		- `switch` 使用严格相等（`===`）比较。
		- `default` 是可选的，类似于 `else`。
		- 适合固定值的多分支选择，复杂条件仍建议使用 `if...else`。

### 循环语句
- **for**
	- 作用：适合已知循环次数的场景。
	- 语法：
		```js
		for (initialization; condition; update) {
		  // 循环体
		}
		```
	- 示例：
		```js
		for (let i = 0; i < 5; i++) {
		  console.log(i); // 输出: 0, 1, 2, 3, 4
		}
		```
	- 注意：
		- 使用 `let` 确保 `i` 具有块级作用域，避免 `var` 的变量提升问题。
		- 初始化、条件、更新部分可省略，但分号 `;` 必须保留。
		- 适合数组遍历或固定次数循环。
- **while**
	- 作用：适合未知循环次数，条件为真时执行。
	- 语法：
		```js
		while (condition) {
		  // 循环体
		}
		```
	- 示例：
		```js
		let i = 0;
		while (i < 5) {
		  console.log(i); // 输出: 0, 1, 2, 3, 4
		  i++;
		}
		```
	- 注意：
		- 确保条件会变为假，否则可能导致死循环。
		- 适合动态条件控制。
- **do...while**
	- 作用：至少执行一次循环体，然后根据条件继续。
	- 语法：
		```js
		do {
		  // 循环体
		} while (condition);
		```
	- 示例：
		```js
		let i = 0;
		do {
		  console.log(i); // 输出: 0, 1, 2, 3, 4
		  i++;
		} while (i < 5);
		```
	- 注意：
		- 即使条件初始为假，循环体也会执行一次。
		- 适合需要至少执行一次的场景，如用户输入验证。
- **for...in**
	- 作用：遍历对象可枚举属性（包括继承的）。
	- 语法：
		```js
		for (variable in object) {
		  // 循环体
		}
		```
	- 示例：
		```js
		let obj = { a: 1, b: 2, c: 3 };
		for (let key in obj) {
		  console.log(`${key}: ${obj[key]}`); // 输出: a: 1, b: 2, c: 3
		}
		```
	- 注意：
		- 主要用于对象，不推荐用于数组（顺序不保证）。
		- 会遍历原型链上的可枚举属性，可用 `hasOwnProperty()` 过滤。
			```js
			for (let key in obj) {
			  if (obj.hasOwnProperty(key)) {
			    console.log(key);
			  }
			}
			```
- **for...of**
	- 作用：遍历可迭代对象（如数组、字符串、Map、Set）的值。
	- 语法：
		```js
		for (variable of iterable) {
		  // 循环体
		}
		```
	- 示例：
		```js
		let arr = [10, 20, 30];
		for (let value of arr) {
		  console.log(value); // 输出: 10, 20, 30
		}
		```
	- 注意：
		- 仅遍历值，不遍历键。
		- 适用于数组、字符串、Map、Set 等可迭代对象。
		- 不遍历普通对象（无 `Symbol.iterator`）。
### 跳转语句
- **break**
	- 作用：立即退出循环或 `switch` 语句。
	- 示例：
		```js
		for (let i = 0; i < 5; i++) {
		  if (i === 3) break;
		  console.log(i); // 输出: 0, 1, 2
		}
		```
	- 注意：
		- 在嵌套循环中，只退出当前循环。
		- 可配合标签（label）退出外层循环：
			```js
			outer: for (let i = 0; i < 3; i++) {
			  for (let j = 0; j < 3; j++) {
			    if (i === 1 && j === 1) break outer;
			    console.log(i, j);
			  }
			}
			// 输出: 0,0 0,1 0,2 1,0
			```
- **continue**
	- 作用：跳过当前循环迭代，继续下一次迭代。
	- 示例：
		```js
		for (let i = 0; i < 5; i++) {
		  if (i === 3) continue;
		  console.log(i); // 输出: 0, 1, 2, 4
		}
		```
	- 注意：
		- 只影响当前循环体。
		- 可配合标签跳到外层循环：
			```js
			outer: for (let i = 0; i < 3; i++) {
			  for (let j = 0; j < 3; j++) {
			    if (j === 1) continue outer;
			    console.log(i, j); // 输出: 0,0 1,0 2,0
			  }
			}
			```
- **return**
	- 作用：退出函数并返回指定值（若无返回值，则返回 `undefined`）。
	- 示例：
		```js
		function findFirstEven(arr) {
		  for (let num of arr) {
		    if (num % 2 === 0) return num;
		  }
		  return null;
		}
		console.log(findFirstEven([1, 3, 4, 5])); // 输出: 4
		```
	- 注意：
		- `return` 立即终止整个函数执行，包括外层循环。
		- 常用于提前退出函数。